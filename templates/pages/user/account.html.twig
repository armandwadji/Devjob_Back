{% extends "base.html.twig" %}

{% block title %}Mon compte{% endblock %}

{% block body %}
	<main class="container mt-5">
		<section class="row g-0  rounded overflow-hidden flex-md-row mb-4 h-md-250 position-relative">
			<div class="col p-4 d-flex flex-column position-static">
				<h3 class="mb-0 text-capitalize">{{user.company.name}}</h3>
				<strong class="d-inline-block mb-2 text-primary">{{user.company.country|country_name}}</strong>
				<p class="card-text mb-auto">Color :
					{{user.company.color}}
				</p>
				<h4 class="card-text mb-auto">Contact :</h4>
				<p class="ms-3">{{user.firstname ~  ' ' ~ user.lastname}}</p>
				<a href="#" class="stretched-link ms-3 ">{{user.email}}</a>
			</div>
			<div class="col-auto d-lg-block rounded-circle p-2" style=" background-color:{{user.company.color}}">
				<img class='rounded-circle' style="width: 100%; height: 100%; max-height: 250px; max-width: 250px; object-fit: contain " src="{% if vich_uploader_asset(user.company, 'imageFile') %} {{vich_uploader_asset(user.company, 'imageFile')}} {% else %} https://picsum.photos/id/{{user.company.id}}/250/250 {% endif %}" alt="Logo de {{user.company.name}}">
			</div>
		</section>
		<hr>

		{% if app.user and 'ROLE_ADMIN' in app.user.roles %}
			<section>

				{% include 'partials/_flash.html.twig' %}
				<a href="{{path('admin.offer.new', {'id': user.company.id , } )}}" class="btn btn-primary mt-4">Ajouter une offre</a>

				{% if user.company.offer|length == 0 %}
					<h4 class='mt-4'>Cette entreprise n'a pas encore d'annonces.</h4>
				{% else %}
					{# total items count #}
					<div class="count mt-4">
						<h5>Cette entreprise Ã  {{ user.company.offer|length }} annonces au total</h5>
					</div>

					{% include "partials/_offers_table.html.twig" with (offers) %}

				{% endif %}
			</section>
		{% endif %}

	</main>
{% endblock %}
